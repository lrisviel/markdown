# Welcome to PaintsTransfer-Euclid !

**We focus on interactivity, possibility and creativity. Time will tell you what is important.**

First of all, why not spend 5 minutes to try it yourself!

http://paintstransfer.com

*(PaintsTransfer-Euclid is the new name of style2paintsV3.)*

The AI can paint on a sketch, obeying your instructions.

The AI can paint on a sketch according to a given specific color style.

The AI can create its own color style to paint on a sketch.

The AI can transfer illustrations' style.

![web_preview](https://raw.githubusercontent.com/lrisviel/markdown/master/github/0.png)

# New Feature: The Geometric Color Anchor

**This github page contains many gif and png images, and it is a better choice to wait your browser before reading it.**

To introduce this feature, let's begin with a kimono sketch of Shiki. The sketch is from google image.

![gif0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/gif0.gif)

The new tool, color anchor, enable you to control the color of your painting with great stability. In most cases, you can use this tool to control the global color of the painting. **In most cases, casting the color anchors should be your first step.**

After this step, you should get a color draft like this:

![display1](https://raw.githubusercontent.com/lrisviel/markdown/master/github/display1.png)

Then, after you finishing your color draft, you should shift to your **Accurate Point** tool. 

![display2](https://raw.githubusercontent.com/lrisviel/markdown/master/github/display2.png?t=233)

Then, you add hint colors and get the final result, like this:

![display3](https://raw.githubusercontent.com/lrisviel/markdown/master/github/display3.png)

Here is a gif version of the process:

![gif1](https://raw.githubusercontent.com/lrisviel/markdown/master/github/gif1.gif)

## All you need to know:

We provide some best-practice for you:

**If you are an artist, we highly recommend you to read these key points!!**

    1. When color anchors are linked, it means that colors on the line may be 
       fused in the final result.
    
    2. Each color anchor has a range circle, it means areas in the cicles may 
       be infuenced. 
    
    3. Color Anchors does (!!!!!!!!!)NOT(!!!!!!!!!) influence the final color, 
       it only influence the color style of the result.
       Thus, DO NOT ONLY use Color Anchors.
       
    4. Accurate Points will only influence detailed, small, minor color area.
       Thus, DO NOT ONLY use Accurate Points.
       
    5. In most cases, you can put some Accurate Points around a Color Anchor,
       with same color. But for advanced usage, you can put Accurate Points
       around anchors with different colors.
       
    6. You should NOT put Color Anchors with all same color. For example, 
       instead of put 8 blue Color Anchors, You should put 3 blue ones, 2
       black ones, 2 white ones and 1 green one. Otherwise the result color
       will be ugly and unbalanced.
       
![right](https://raw.githubusercontent.com/lrisviel/markdown/master/github/right.png)
    
In the same way, you can get many Shiki with different color, such as:

![s1](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sh1.png)

![s2](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sh2.png)

![s3](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sh3.png)

After reading these, you may ask: 

*"Oh, you are just good at color selection! But I am blind to these color and I have never learnt to painting! How can I select right color?"*

Ok, here we present a best-practice color list for you:

![display4](https://raw.githubusercontent.com/lrisviel/markdown/master/github/display4.png?t=233)

**Then, can I use reference images just like PaintsTransferV2.0?**

You can still upload your reference, but keep in mind that you need to drag the "stylizing rate" slider.

Here is an example with reference image:

<img src="https://raw.githubusercontent.com/lrisviel/markdown/master/github/styleref.png" height = "300" />

    We do NOT recommend you to paint in this way, because it is hard to find suitable reference images.
    
# SEX OR VIOLENCE WARNING

Contents below may include:

    1. Arts with female body.
    2. Arts with nude skin.
    3. Asia style arts of girls with short skirts, low bosom elements, lolita or others.
    4. All virtual characters are more than 18 years old.

**If you feel uncomfortable about these elements, you can stop reading here.**

**You should stop reading if you are under 14 years old.**

**You have been warned.**

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_

_


# New Feature: The Controlable Shading

Let's begin with one of the promotion sketch of our friend paintschainer *(paintschainer.preferred.tech)*. 

You can find this sketch here:

<img src="https://raw.githubusercontent.com/lrisviel/markdown/master/github/dis5.png" height = "300" />

Here is a overview of this feature:

![shading](https://raw.githubusercontent.com/lrisviel/markdown/master/github/shading.png)

Here we explain what happen. First of all, you just make a normal paintstransfer painting, like this:

![screen0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/screen0.png)

Then we select colors for shadow.

![colorshadow](https://raw.githubusercontent.com/lrisviel/markdown/master/github/colorshadow.png)

Then you use these four step to get the shadow.

![shadowhints](https://raw.githubusercontent.com/lrisviel/markdown/master/github/shadowhints.png)

![sa0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sa0.png)

We can also change the dress into black, and use similar method to reach a highlight shading:

![shadow2](https://raw.githubusercontent.com/lrisviel/markdown/master/github/shadow2.png)

![ssa](https://raw.githubusercontent.com/lrisviel/markdown/master/github/ssa.png)

Some other similar examples:

![se0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/se0.png)

![se1](https://raw.githubusercontent.com/lrisviel/markdown/master/github/se1.png)

# New Feature: The New Skin Engine

Let us begin with a sketch from google, and this sketch has relative large skin area:

<img src="https://raw.githubusercontent.com/lrisviel/markdown/master/github/sketch.original.png" height = "300" />

And here is the result from **PaintsChainer** :

![pc](https://raw.githubusercontent.com/lrisviel/markdown/master/github/pc.png)

As we can see, the skin rendering is very hard for AI. But we have a new Skin Engine, and here is our result.

![sk0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sk0.png)

And some other similar results:

![sk1](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sk1.png)

![sk2](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sk2.png)

![sk3](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sk3.png)

# New Feature: The Outline Emphasizer

Sometimes you may want to emphasize the lines so as to achieve a natural painting. Then we have developed the standalone **Outline Emphasizer**:

![ous](https://raw.githubusercontent.com/lrisviel/markdown/master/github/ous.png)

Let begin with a sample of sakura:

![sakura](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sakura.png)

Then, we enable the **Outline Emphasizer** and we can get this result:

![sakura2](https://raw.githubusercontent.com/lrisviel/markdown/master/github/sakura2.png)

Here is a comparison:

![com01](https://raw.githubusercontent.com/lrisviel/markdown/master/github/com01.jpg)

Another example with **Outline Emphasizer**:

![ane0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/ane0.png)

Without **Outline Emphasizer**:

![ane1](https://raw.githubusercontent.com/lrisviel/markdown/master/github/ane1.png)

Here is a comparison:

![cp2](https://raw.githubusercontent.com/lrisviel/markdown/master/github/cp2.png)

# Repaint Mode (Re-Colorization Mode)

**NOTICE!! This feature is NOT stable currently !!**

If you upload a finished painting and shift to the re-colorization mode, the software will give you a sketch extracted from the painting and it will paint on the new sketch again, obying your hints.

Here is an example:

![violet](https://raw.githubusercontent.com/lrisviel/markdown/master/github/violet.png)

My 《Deep Violet Fantasy》, a result of **Re-Colorization Mode** in PaintsTransferV3. Original Image is from [Here](https://raw.githubusercontent.com/lrisviel/markdown/master/github/or1.png). 

Here is how I create it:

![st0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/st0.png)

Some other examples:

Origins:

<img src="https://raw.githubusercontent.com/lrisviel/markdown/master/github/ors.png" height = "180" />

Results:

![st0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/st1.png)

![st0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/st2.png)

![st0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/st3.png)

## A trick - the rerendering mode

Sometimes your sketch may not combines of lines, or the sketch itself is a black-and-white illustration. 

Then you may need this mode. For example, this sketch:

<img src="https://raw.githubusercontent.com/lrisviel/markdown/master/github/baws.png" height = "250" />

And the results:

![blac](https://raw.githubusercontent.com/lrisviel/markdown/master/github/bawc.png)

# New Feature: The Palette Prediction for Lazy Users

**NOTICE!! This feature is NOT stable currently !!**

**Lazy** users are those who do not want to input any instructions. For those users, we updated our core models so as to make the results reasonable when there are no user hints.

**All below results are achieved without human hints, or with minor detailed hints:**

![w0](https://raw.githubusercontent.com/lrisviel/markdown/master/github/w0.png)

![w1](https://raw.githubusercontent.com/lrisviel/markdown/master/github/w1.png)

![w3](https://raw.githubusercontent.com/lrisviel/markdown/master/github/w3.png)

![w4](https://raw.githubusercontent.com/lrisviel/markdown/master/github/w4.png)

![w5](https://raw.githubusercontent.com/lrisviel/markdown/master/github/w5.png)

# Extreme Hint Density Holder

Our new engine can hold as much as possible hints, without causing disordering or blurring. 

Here is some example when there are LOTS of user hints:

![hss](https://raw.githubusercontent.com/lrisviel/markdown/master/github/e0.png)

![hss](https://raw.githubusercontent.com/lrisviel/markdown/master/github/e1.png)

![hss](https://raw.githubusercontent.com/lrisviel/markdown/master/github/e2.png)

![hss](https://raw.githubusercontent.com/lrisviel/markdown/master/github/e3.png)

![hss](https://raw.githubusercontent.com/lrisviel/markdown/master/github/e4.png)

![hss](https://raw.githubusercontent.com/lrisviel/markdown/master/github/e7.png)

# Latest News

2018.4.28 - PaintsTransfer-Euclid released.

2018.4.16 - We changed our time schedule:

    1. PaintsTransfer V3 will have an online demo, and V2 demo will not be avaliable online anymore.
    2. PaintsTransfer V3 can do all what V2 can do (in theory).
    3. PaintsTransfer V3 will be renamed into PaintsTransfer-Euclid V1.0.
    4. PaintsTransfer-Euclid will be released at 2018.04.28 23:59 CST.

2018.4.13 - A good news: PaintsTransfer V3 is decided to be released at 2018.04.28-2018.04.30. Have a magical day!

2018.4.13 - A good news: We finally get the server. PaintsTransfer V2 will be avaliable again before 2018.04.13.

2018.4.6 - A bad news: We have developed paintstransfer V3, but it is defeated by V2. Theoretically, the deeper V3 should be better than V2 but our user studies show that V2 is still the best painter. 

*The consequence is:*

    50% possibility: We will combine some good part of unfinished V3 into V2 and release V2.5. 
                     And V3 will not be released.
    50% possibility: We will improve V3 and release V3.


2018.2.12 - PaintsTransfer 3.0 will be released in 2018.04.25-2018.05.15. We will use a totally non-residual very deep model.

2018.2.3 - We added the *super accurate pencil*, and the original pencil tool is replaced by *brush*. The problem of over colorization in non-reference mode is fixed when you use the *super accurate pencil*, and the color spreading of *super accurate pencil* is limited to a relative small degree.

2018.01.15 - PaintsTransfer V2.1 released.

2017.12.29 - PaintsTransfer V2.0 released.

2017.10.23 - PaintsTransfer released.

# Launch Server

*you need a python 3.5/3.6 GPU environment with cuda.*

    pip install tensorflow_gpu
    pip install keras
    pip install bottle
    pip install gevent
    pip install h5py
    pip install opencv-python
    pip install scikit-image
    git clone https://github.com/lllyasviel/style2paints.git
    
Then you need to download all models from our Google Drive and put these into 'server' folder.
    
    cd style2paints/server
    python server.py


# Models

Currently, we reserve all rights about all these models. 

We use Google Drive to upload models:

    https://drive.google.com/open?id=1fWi4wmNj-xr-nCzuWMsN2rcm0249_Aem
    
Current model list of the 8 neural networks:

    baby.net
    head.net
    neck.net
    tail.net
    reader.net
    girder.net

# Training Datasets

**We do not use additional training data.**

**Danbooru2017 is highly recommended.**

1. The recommended training dataset of illustrations is the 400k images from [nico-opendata](https://nico-opendata.jp/en/seigadata/index.html) and [Danbooru2017](http://www.gwern.net/Danbooru2017).

2. The recommended training sketches is from [sketchKeras](https://github.com/lllyasviel/sketchKeras).

# Community

QQ Group ID: 184467946

## Acknowledgements

Thanks a lot to TaiZan. This project could not be achieved without his great help.
